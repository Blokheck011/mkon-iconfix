!function(){for(var t,e=function(){},i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],s=i.length,r=window.console=window.console||{};s--;)t=i[s],r[t]||(r[t]=e)}(),function(t){function e(e){return e[0]&&t.isPlainObject(e[0])?this.data=e[0]:this.el=e,this.isCoords=!0,this.coords={},this.init(),this}var i=e.prototype;i.init=function(){this.set(),this.original_coords=this.get()},i.set=function(t,e){var i=this.el;if(i&&!t&&(this.data=i.offset(),this.data.width=i.width(),this.data.height=i.height()),i&&t&&!e){var s=i.offset();this.data.top=s.top,this.data.left=s.left}var r=this.data;return this.coords.x1=r.left,this.coords.y1=r.top,this.coords.x2=r.left+r.width,this.coords.y2=r.top+r.height,this.coords.cx=r.left+r.width/2,this.coords.cy=r.top+r.height/2,this.coords.width=r.width,this.coords.height=r.height,this.coords.el=i||!1,this},i.update=function(e){if(!e&&!this.el)return this;if(e){var i=t.extend({},this.data,e);return this.data=i,this.set(!0,!0)}return this.set(!0),this},i.get=function(){return this.coords},t.fn.coords=function(){if(this.data("coords"))return this.data("coords");var t=new e(this,arguments[0]);return this.data("coords",t),t}}(jQuery,window,document),function(t,e,i){function s(e,i,s){this.options=t.extend(r,s),this.$element=e,this.last_colliders=[],this.last_colliders_coords=[],"string"==typeof i||i instanceof jQuery?this.$colliders=t(i,this.options.colliders_context).not(this.$element):this.colliders=t(i),this.init()}var r={colliders_context:i.body},o=s.prototype;o.init=function(){this.find_collisions()},o.overlaps=function(t,e){var i=!1,s=!1;return(e.x1>=t.x1&&e.x1<=t.x2||e.x2>=t.x1&&e.x2<=t.x2||t.x1>=e.x1&&t.x2<=e.x2)&&(i=!0),(e.y1>=t.y1&&e.y1<=t.y2||e.y2>=t.y1&&e.y2<=t.y2||t.y1>=e.y1&&t.y2<=e.y2)&&(s=!0),i&&s},o.detect_overlapping_region=function(t,e){var i="",s="";return t.y1>e.cy&&t.y1<e.y2&&(i="N"),t.y2>e.y1&&t.y2<e.cy&&(i="S"),t.x1>e.cx&&t.x1<e.x2&&(s="W"),t.x2>e.x1&&t.x2<e.cx&&(s="E"),i+s||"C"},o.calculate_overlapped_area_coords=function(e,i){var s=Math.max(e.x1,i.x1),r=Math.max(e.y1,i.y1),o=Math.min(e.x2,i.x2),n=Math.min(e.y2,i.y2);return t({left:s,top:r,width:o-s,height:n-r}).coords().get()},o.calculate_overlapped_area=function(t){return t.width*t.height},o.manage_colliders_start_stop=function(e,i,s){for(var r=this.last_colliders_coords,o=0,n=r.length;n>o;o++)-1===t.inArray(r[o],e)&&i.call(this,r[o]);for(var a=0,h=e.length;h>a;a++)-1===t.inArray(e[a],r)&&s.call(this,e[a])},o.find_collisions=function(e){for(var i=this,s=[],r=[],o=this.colliders||this.$colliders,n=o.length,a=i.$element.coords().update(e||!1).get();n--;){var h=i.$colliders?t(o[n]):o[n],l=h.isCoords?h:h.coords(),c=l.get(),d=i.overlaps(a,c);if(d){var _=i.detect_overlapping_region(a,c);if("C"===_){var u=i.calculate_overlapped_area_coords(a,c),p=i.calculate_overlapped_area(u),g={area:p,area_coords:u,region:_,coords:c,player_coords:a,el:h};i.options.on_overlap&&i.options.on_overlap.call(this,g),s.push(l),r.push(g)}}}return(i.options.on_overlap_stop||i.options.on_overlap_start)&&this.manage_colliders_start_stop(s,i.options.on_overlap_start,i.options.on_overlap_stop),this.last_colliders_coords=s,r},o.get_closest_colliders=function(t){var e=this.find_collisions(t);return e.sort(function(t,e){return"C"===t.region&&"C"===e.region?t.coords.y1<e.coords.y1||t.coords.x1<e.coords.x1?-1:1:t.area<e.area?1:1}),e},t.fn.collision=function(t,e){return new s(this,t,e)}}(jQuery,window,document),function(t){t.delay=function(t,e){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},t.debounce=function(t,e,i){var s;return function(){var r=this,o=arguments,n=function(){s=null,i||t.apply(r,o)};i&&!s&&t.apply(r,o),clearTimeout(s),s=setTimeout(n,e)}},t.throttle=function(t,e){var i,s,r,o,n,a,h=debounce(function(){n=o=!1},e);return function(){i=this,s=arguments;var l=function(){r=null,n&&t.apply(i,s),h()};return r||(r=setTimeout(l,e)),o?n=!0:a=t.apply(i,s),h(),o=!0,a}}}(window),function(t,e,i){function s(e,s){this.options=t.extend({},r,s),this.$body=t(i.body),this.$container=t(e),this.$dragitems=t(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.init()}var r={items:"li",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1},o=t(e),n=!!("ontouchstart"in e),a={start:n?"touchstart.gridster-draggable":"mousedown.gridster-draggable",move:n?"touchmove.gridster-draggable":"mousemove.gridster-draggable",end:n?"touchend.gridster-draggable":"mouseup.gridster-draggable"},h=s.prototype;h.init=function(){this.calculate_positions(),this.$container.css("position","relative"),this.disabled=!1,this.events(),t(e).bind("resize.gridster-draggable",throttle(t.proxy(this.calculate_positions,this),200))},h.events=function(){this.$container.on("selectstart.gridster-draggable",t.proxy(this.on_select_start,this)),this.$container.on(a.start,this.options.items,t.proxy(this.drag_handler,this)),this.$body.on(a.end,t.proxy(function(t){this.is_dragging=!1,this.disabled||(this.$body.off(a.move),this.drag_start&&this.on_dragstop(t))},this))},h.get_actual_pos=function(t){var e=t.position();return e},h.get_mouse_pos=function(t){if(n){var e=t.originalEvent;t=e.touches.length?e.touches[0]:e.changedTouches[0]}return{left:t.clientX,top:t.clientY}},h.get_offset=function(t){t.preventDefault();var e=this.get_mouse_pos(t),i=Math.round(e.left-this.mouse_init_pos.left),s=Math.round(e.top-this.mouse_init_pos.top),r=Math.round(this.el_init_offset.left+i-this.baseX),o=Math.round(this.el_init_offset.top+s-this.baseY+this.scrollOffset);return this.options.limit&&(r>this.player_max_left?r=this.player_max_left:r<this.player_min_left&&(r=this.player_min_left)),{position:{left:r,top:o},pointer:{left:e.left,top:e.top,diff_left:i,diff_top:s+this.scrollOffset}}},h.get_drag_data=function(t){var e=this.get_offset(t);return e.$player=this.$player,e.$helper=this.helper?this.$helper:this.$player,e},h.manage_scroll=function(t){var e,i=o.scrollTop(),s=i,r=s+this.window_height,n=r-50,a=s+50,h=(t.pointer.left,s+t.pointer.top),l=this.doc_height-this.window_height+this.player_height;h>=n&&(e=i+30,l>e&&(o.scrollTop(e),this.scrollOffset=this.scrollOffset+30)),a>=h&&(e=i-30,e>0&&(o.scrollTop(e),this.scrollOffset=this.scrollOffset-30))},h.calculate_positions=function(){this.window_height=o.height()},h.drag_handler=function(e){e.target.nodeName;if(!this.disabled&&(1===e.which||n)&&!this.ignore_drag(e)){var i=this,s=!0;return this.$player=t(e.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(e),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$body.on(a.move,function(t){var e=i.get_mouse_pos(t),r=Math.abs(e.left-i.mouse_init_pos.left),o=Math.abs(e.top-i.mouse_init_pos.top);return r>i.options.distance||o>i.options.distance?s?(s=!1,i.on_dragstart.call(i,t),!1):(i.is_dragging===!0&&i.on_dragmove.call(i,t),!1):!1}),n?void 0:!1}},h.on_dragstart=function(e){if(e.preventDefault(),this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var s=this.$container.offset();this.baseX=Math.round(s.left),this.baseY=Math.round(s.top),this.doc_height=t(i).height(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scrollOffset=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height();var r=this.options.container_width||this.$container.width();return this.player_max_left=r-this.player_width+this.options.offset_left,this.options.start&&this.options.start.call(this.$player,e,this.get_drag_data(e)),!1},h.on_dragmove=function(t){var e=this.get_drag_data(t);this.options.autoscroll&&this.manage_scroll(e),this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:e.position.left,top:e.position.top});var i=this.last_position||e.position;return e.prev_position=i,this.options.drag&&this.options.drag.call(this.$player,t,e),this.last_position=e.position,!1},h.on_dragstop=function(t){var e=this.get_drag_data(t);return this.drag_start=!1,this.options.stop&&this.options.stop.call(this.$player,t,e),this.helper&&this.$helper.remove(),!1},h.on_select_start=function(t){return this.disabled||this.ignore_drag(t)?void 0:!1},h.enable=function(){this.disabled=!1},h.disable=function(){this.disabled=!0},h.destroy=function(){this.disable(),this.$container.off(".gridster-draggable"),this.$body.off(".gridster-draggable"),t(e).off(".gridster-draggable"),t.removeData(this.$container,"drag")},h.ignore_drag=function(e){return this.options.handle?!t(e.target).is(this.options.handle):t(e.target).is(this.options.ignore_dragging.join(", "))},t.fn.drag=function(t){return new s(this,t)}}(jQuery,window,document),function(t,e,i){function s(e,i){this.options=t.extend(!0,r,i),this.$el=t(e),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w"),this.widgets=[],this.$changed=t([]),this.wrapper_width=this.$wrapper.width(),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.$style_tags=t([]),this.init()}var r={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:null,min_rows:15,max_size_x:!1,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,serialize_params:function(t,e){return{col:e.col,row:e.row,size_x:e.size_x,size_y:e.size_y}},collision:{},draggable:{items:".gs-w",distance:4},resize:{enabled:!1,axes:["x","y","both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[1/0,1/0]}};s.generated_stylesheets=[];var o=s.prototype;o.init=function(){this.options.resize.enabled&&this.setup_resize(),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.$wrapper.addClass("ready"),this.draggable(),this.options.resize.enabled&&this.resizable(),t(e).bind("resize.gridster",throttle(t.proxy(this.recalculate_faux_grid,this),200))},o.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},o.enable=function(){return this.drag_api.enable(),this},o.disable_resize=function(){return this.$el.addClass("gs-resize-disabled"),this.resize_api.disable(),this},o.enable_resize=function(){return this.$el.removeClass("gs-resize-disabled"),this.resize_api.enable(),this},o.add_widget=function(e,i,s,r,o,n){var a;i||(i=1),s||(s=1),!r&!o?a=this.next_position(i,s):(a={col:r,row:o},this.empty_cells(r,o,i,s));var h=t(e).attr({"data-col":a.col,"data-row":a.row,"data-sizex":i,"data-sizey":s}).addClass("gs-w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(h),this.register_widget(h),this.add_faux_rows(a.size_y),n&&this.set_widget_max_size(h,n),this.set_dom_grid_height(),h.fadeIn()},o.set_widget_max_size=function(t,e){if(t="number"==typeof t?this.$widgets.eq(t):t,!t.length)return this;var i=t.data("coords").grid;return i.max_size_x=e[0],i.max_size_y=e[1],this},o.add_resize_handle=function(e){var i=this.options.resize.handle_append_to;return t(this.resize_handle_tpl).appendTo(i?t(i,e):e),this},o.resize_widget=function(t,e,i,s,r){var o=t.coords().grid;s!==!1&&(s=!0),e||(e=o.size_x),i||(i=o.size_y),e>this.cols&&(e=this.cols);var n=o.size_y,a=o.col,h=a;if(s&&a+e-1>this.cols){var l=a+(e-1)-this.cols,c=a-l;h=Math.max(1,c)}i>n&&this.add_faux_rows(Math.max(i-n,0));var d={col:h,row:o.row,size_x:e,size_y:i};return this.mutate_widget_in_gridmap(t,o,d),this.set_dom_grid_height(),r&&r.call(this,d.size_x,d.size_y),t},o.mutate_widget_in_gridmap=function(e,i,s){var r=(i.size_x,i.size_y),o=this.get_cells_occupied(i),n=this.get_cells_occupied(s),a=[];t.each(o.cols,function(e,i){-1===t.inArray(i,n.cols)&&a.push(i)});var h=[];t.each(n.cols,function(e,i){-1===t.inArray(i,o.cols)&&h.push(i)});var l=[];t.each(o.rows,function(e,i){-1===t.inArray(i,n.rows)&&l.push(i)});var c=[];if(t.each(n.rows,function(e,i){-1===t.inArray(i,o.rows)&&c.push(i)}),this.remove_from_gridmap(i),h.length){var d=[s.col,s.row,s.size_x,Math.min(r,s.size_y),e];this.empty_cells.apply(this,d)}if(c.length){var _=[s.col,s.row,s.size_x,s.size_y,e];this.empty_cells.apply(this,_)}if(i.col=s.col,i.row=s.row,i.size_x=s.size_x,i.size_y=s.size_y,this.add_to_gridmap(s,e),e.removeClass("player-revert"),e.data("coords").update({width:s.size_x*this.options.widget_base_dimensions[0]+(s.size_x-1)*this.options.widget_margins[0]*2,height:s.size_y*this.options.widget_base_dimensions[1]+(s.size_y-1)*this.options.widget_margins[1]*2}),e.attr({"data-col":s.col,"data-row":s.row,"data-sizex":s.size_x,"data-sizey":s.size_y}),a.length){var u=[a[0],s.row,a.length,Math.min(r,s.size_y),e];this.remove_empty_cells.apply(this,u)}if(l.length){var p=[s.col,s.row,s.size_x,s.size_y,e];this.remove_empty_cells.apply(this,p)}return this.move_widget_up(e),this},o.empty_cells=function(e,i,s,r,o){var n=this.widgets_below({col:e,row:i-r,size_x:s,size_y:r});return n.not(o).each(t.proxy(function(e,s){var o=t(s).coords().grid;if(o.row<=i+r-1){var n=i+r-o.row;this.move_widget_down(t(s),n)}},this)),this.set_dom_grid_height(),this},o.remove_empty_cells=function(e,i,s,r,o){var n=this.widgets_below({col:e,row:i,size_x:s,size_y:r});return n.not(o).each(t.proxy(function(e,i){this.move_widget_up(t(i),r)},this)),this.set_dom_grid_height(),this},o.next_position=function(t,e){t||(t=1),e||(e=1);for(var i,s=this.gridmap,r=s.length,o=[],n=1;r>n;n++){i=s[n].length;for(var a=1;i>=a;a++){var h=this.can_move_to({size_x:t,size_y:e},n,a);h&&o.push({col:n,row:a,size_y:e,size_x:t})}}return o.length?this.sort_by_row_and_col_asc(o)[0]:!1},o.remove_widget=function(e,i,s){var r=e instanceof jQuery?e:t(e),o=r.coords().grid;t.isFunction(i)&&(s=i,i=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(r);var n=this.widgets_below(r);return this.remove_from_gridmap(o),r.fadeOut(t.proxy(function(){r.remove(),i||n.each(t.proxy(function(e,i){this.move_widget_up(t(i),o.size_y)},this)),this.set_dom_grid_height(),s&&s.call(this,e)},this)),this},o.remove_all_widgets=function(e){return this.$widgets.each(t.proxy(function(t,i){this.remove_widget(i,!0,e)},this)),this},o.serialize=function(e){e||(e=this.$widgets);var i=[];return e.each(t.proxy(function(e,s){i.push(this.options.serialize_params(t(s),t(s).coords().grid))},this)),i},o.serialize_changed=function(){return this.serialize(this.$changed)},o.register_widget=function(e){var i={col:parseInt(e.attr("data-col"),10),row:parseInt(e.attr("data-row"),10),size_x:parseInt(e.attr("data-sizex"),10),size_y:parseInt(e.attr("data-sizey"),10),max_size_x:parseInt(e.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(e.attr("data-max-sizey"),10)||!1,el:e};return this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:i.size_x,size_y:i.size_y},i.col,i.row)&&(t.extend(i,this.next_position(i.size_x,i.size_y)),e.attr({"data-col":i.col,"data-row":i.row,"data-sizex":i.size_x,"data-sizey":i.size_y})),e.data("coords",e.coords()),e.data("coords").grid=i,this.add_to_gridmap(i,e),this.options.resize.enabled&&this.add_resize_handle(e),this},o.update_widget_position=function(t,e){return this.for_each_cell_occupied(t,function(t,i){return this.gridmap[t]?(this.gridmap[t][i]=e,void 0):this}),this},o.remove_from_gridmap=function(t){return this.update_widget_position(t,!1)},o.add_to_gridmap=function(e,i){if(this.update_widget_position(e,i||e.el),e.el){var s=this.widgets_below(e.el);s.each(t.proxy(function(e,i){this.move_widget_up(t(i))},this))}},o.draggable=function(){var e=this,i=t.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],container_width:this.container_width,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON","."+this.options.resize.handle_class],start:function(i,s){e.$widgets.filter(".player-revert").removeClass("player-revert"),e.$player=t(this),e.$helper=t(s.$helper),e.helper=!e.$helper.is(e.$player),e.on_start_drag.call(e,i,s),e.$el.trigger("gridster:dragstart")},stop:function(t,i){e.on_stop_drag.call(e,t,i),e.$el.trigger("gridster:dragstop")},drag:throttle(function(t,i){e.on_drag.call(e,t,i),e.$el.trigger("gridster:drag")},60)});return this.drag_api=this.$el.drag(i),this},o.resizable=function(){return this.resize_api=this.$el.drag({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:!1,start:t.proxy(this.on_start_resize,this),stop:t.proxy(function(e,i){delay(t.proxy(function(){this.on_stop_resize(e,i)},this),120)},this),drag:throttle(t.proxy(this.on_resize,this),60)}),this},o.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var e=this.options.resize.axes,i='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';return this.resize_handle_tpl=t.map(e,function(t){return i.replace("{type}",t)}).join(""),this},o.on_start_drag=function(e,i){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=t.extend({},this.player_grid_data),this.$el.css("height",this.$el.height()+this.player_grid_data.size_y*this.min_widget_height);var s=this.faux_grid,r=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(s,this.options.collision),this.$preview_holder=t("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:r.width,height:r.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,e,i)},o.on_drag=function(t,e){if(null===this.$player)return!1;var i={left:e.position.left+this.baseX,top:e.position.top+this.baseY};this.colliders_data=this.collision_api.get_closest_colliders(i),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:e.position.left,top:e.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,t,e)},o.on_stop_drag=function(t,e){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),e.position.left=e.position.left+this.baseX,e.position.top=e.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(e.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,t,e),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.set_dom_grid_height()},o.on_start_resize=function(e,i){this.$resized_widget=i.$player.closest(".gs-w"),this.resize_coords=this.$resized_widget.coords(),this.resize_wgd=this.resize_coords.grid,this.resize_initial_width=this.resize_coords.coords.width,this.resize_initial_height=this.resize_coords.coords.height,this.resize_initial_sizex=this.resize_coords.grid.size_x,this.resize_initial_sizey=this.resize_coords.grid.size_y,this.resize_last_sizex=this.resize_initial_sizex,this.resize_last_sizey=this.resize_initial_sizey,this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.cols-this.resize_wgd.col+1),this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1],this.resize_dir={right:i.$player.is("."+this.resize_handle_class+"-x"),bottom:i.$player.is("."+this.resize_handle_class+"-y")},this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]});var s=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=t("<"+s+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el),this.$resized_widget.addClass("resizing"),this.options.resize.start&&this.options.resize.start.call(this,e,i,this.$resized_widget)},o.on_stop_resize=function(e,i){this.$resized_widget.removeClass("resizing").css({width:"",height:""}),delay(t.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""})},this),300),this.options.resize.stop&&this.options.resize.stop.call(this,e,i,this.$resized_widget)},o.on_resize=function(t,e){var i=e.pointer.diff_left,s=e.pointer.diff_top,r=this.options.widget_base_dimensions[0],o=this.options.widget_base_dimensions[1],n=1/0,a=1/0,h=Math.ceil(i/(this.options.widget_base_dimensions[0]+2*this.options.widget_margins[0])-.2),l=Math.ceil(s/(this.options.widget_base_dimensions[1]+2*this.options.widget_margins[1])-.2),c=Math.max(1,this.resize_initial_sizex+h),d=Math.max(1,this.resize_initial_sizey+l);c=Math.min(c,this.resize_max_size_x),n=this.resize_max_size_x*r+(c-1)*this.options.widget_margins[0]*2,d=Math.min(d,this.resize_max_size_y),a=this.resize_max_size_y*o+(d-1)*this.options.widget_margins[1]*2,this.resize_dir.right?d=this.resize_initial_sizey:this.resize_dir.bottom&&(c=this.resize_initial_sizex);var _={};!this.resize_dir.bottom&&(_.width=Math.min(this.resize_initial_width+i,n)),!this.resize_dir.right&&(_.height=Math.min(this.resize_initial_height+s,a)),this.$resized_widget.css(_),(c!==this.resize_last_sizex||d!==this.resize_last_sizey)&&(this.resize_widget(this.$resized_widget,c,d,!1),this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":c,"data-sizey":d})),this.options.resize.resize&&this.options.resize.resize.call(this,t,e,this.$resized_widget),this.resize_last_sizex=c,this.resize_last_sizey=d},o.on_overlapped_column_change=function(e,i){if(!this.colliders_data.length)return this;var s,r=this.get_targeted_columns(this.colliders_data[0].el.data.col),o=this.last_cols.length,n=r.length;for(s=0;n>s;s++)-1===t.inArray(r[s],this.last_cols)&&(e||t.noop).call(this,r[s]);for(s=0;o>s;s++)-1===t.inArray(this.last_cols[s],r)&&(i||t.noop).call(this,this.last_cols[s]);return this.last_cols=r,this},o.on_overlapped_row_change=function(e,i){if(!this.colliders_data.length)return this;var s,r=this.get_targeted_rows(this.colliders_data[0].el.data.row),o=this.last_rows.length,n=r.length;for(s=0;n>s;s++)-1===t.inArray(r[s],this.last_rows)&&(e||t.noop).call(this,r[s]);for(s=0;o>s;s++)-1===t.inArray(this.last_rows[s],r)&&(i||t.noop).call(this,this.last_rows[s]);this.last_rows=r},o.set_player=function(t,e,i){var s=this;i||this.empty_cells_player_occupies();var r=i?{col:t}:s.colliders_data[0].el.data,o=r.col,n=e||r.row;this.player_grid_data={col:o,row:n,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var a=this.get_widgets_overlapped(this.player_grid_data),h=this.widgets_constraints(a);if(this.manage_movements(h.can_go_up,o,n),this.manage_movements(h.can_not_go_up,o,n),!a.length){var l=this.can_go_player_up(this.player_grid_data);l!==!1&&(n=l),this.set_placeholder(o,n)}return{col:o,row:n}},o.widgets_constraints=function(e){var i,s=t([]),r=[],o=[];return e.each(t.proxy(function(e,i){var n=t(i),a=n.coords().grid;this.can_go_widget_up(a)?(s=s.add(n),r.push(a)):o.push(a)},this)),i=e.not(s),{can_go_up:this.sort_by_row_asc(r),can_not_go_up:this.sort_by_row_desc(o)}},o.sort_by_row_asc=function(e){return e=e.sort(function(e,i){return e.row||(e=t(e).coords().grid,i=t(i).coords().grid),e.row>i.row?1:-1})},o.sort_by_row_and_col_asc=function(t){return t=t.sort(function(t,e){return t.row>e.row||t.row===e.row&&t.col>e.col?1:-1})},o.sort_by_col_asc=function(t){return t=t.sort(function(t,e){return t.col>e.col?1:-1})},o.sort_by_row_desc=function(t){return t=t.sort(function(t,e){return t.row+t.size_y<e.row+e.size_y?1:-1})},o.manage_movements=function(e,i,s){return t.each(e,t.proxy(function(t,e){var r=e,o=r.el,n=this.can_go_widget_up(r);if(n)this.move_widget_to(o,n),this.set_placeholder(i,n+r.size_y);else{var a=this.can_go_player_up(this.player_grid_data);if(!a){var h=s+this.player_grid_data.size_y-r.row;this.move_widget_down(o,h),this.set_placeholder(i,s)}}},this)),this},o.is_player=function(t,e){if(e&&!this.gridmap[t])return!1;var i=e?this.gridmap[t][e]:t;return i&&(i.is(this.$player)||i.is(this.$helper))},o.is_player_in=function(e,i){var s=this.cells_occupied_by_player||{};return t.inArray(e,s.cols)>=0&&t.inArray(i,s.rows)>=0},o.is_placeholder_in=function(e,i){var s=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(e)&&t.inArray(i,s.rows)>=0},o.is_placeholder_in_col=function(e){var i=this.cells_occupied_by_placeholder||[];return t.inArray(e,i.cols)>=0},o.is_empty=function(t,e){return"undefined"!=typeof this.gridmap[t]?"undefined"!=typeof this.gridmap[t][e]&&this.gridmap[t][e]===!1?!0:!1:!0},o.is_occupied=function(t,e){return this.gridmap[t]?this.gridmap[t][e]?!0:!1:!1},o.is_widget=function(t,e){var i=this.gridmap[t];return i?(i=i[e],i?i:!1):!1},o.is_widget_under_player=function(t,e){return this.is_widget(t,e)?this.is_player_in(t,e):!1},o.get_widgets_under_player=function(e){e||(e=this.cells_occupied_by_player||{cols:[],rows:[]});var i=t([]);return t.each(e.cols,t.proxy(function(s,r){t.each(e.rows,t.proxy(function(t,e){this.is_widget(r,e)&&(i=i.add(this.gridmap[r][e]))},this))},this)),i},o.set_placeholder=function(e,i){var s=t.extend({},this.placeholder_grid_data),r=this.widgets_below({col:s.col,row:s.row,size_y:s.size_y,size_x:s.size_x}),o=e+s.size_x-1;o>this.cols&&(e-=o-e);var n=this.placeholder_grid_data.row<i,a=this.placeholder_grid_data.col!==e;this.placeholder_grid_data.col=e,this.placeholder_grid_data.row=i,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":i,"data-col":e}),(n||a)&&r.each(t.proxy(function(i,r){this.move_widget_up(t(r),this.placeholder_grid_data.col-e+s.size_y)},this));var h=this.get_widgets_under_player(this.cells_occupied_by_placeholder);h.length&&h.each(t.proxy(function(e,r){var o=t(r);this.move_widget_down(o,i+s.size_y-o.data("coords").grid.row)},this))},o.can_go_player_up=function(t){var e=t.row+t.size_y-1,i=!0,s=[],r=1e4,o=this.get_widgets_under_player();return this.for_each_column_occupied(t,function(t){var n=this.gridmap[t],a=e+1;for(s[t]=[];--a>0&&(this.is_empty(t,a)||this.is_player(t,a)||this.is_widget(t,a)&&n[a].is(o));)s[t].push(a),r=r>a?a:r;return 0===s[t].length?(i=!1,!0):(s[t].sort(function(t,e){return t-e}),void 0)}),i?this.get_valid_rows(t,s,r):!1},o.can_go_widget_up=function(t){var e=t.row+t.size_y-1,i=!0,s=[],r=1e4;return this.for_each_column_occupied(t,function(o){var n=this.gridmap[o];s[o]=[];for(var a=e+1;--a>0&&(!this.is_widget(o,a)||this.is_player_in(o,a)||n[a].is(t.el));)this.is_player(o,a)||this.is_placeholder_in(o,a)||this.is_player_in(o,a)||s[o].push(a),r>a&&(r=a);return 0===s[o].length?(i=!1,!0):(s[o].sort(function(t,e){return t-e}),void 0)}),i?this.get_valid_rows(t,s,r):!1},o.get_valid_rows=function(e,i,s){for(var r=e.row,o=e.row+e.size_y-1,n=e.size_y,a=s-1,h=[];++a<=o;){var l=!0;if(t.each(i,function(e,i){t.isArray(i)&&-1===t.inArray(a,i)&&(l=!1)}),l===!0&&(h.push(a),h.length===n))break}var c=!1;return 1===n?h[0]!==r&&(c=h[0]||!1):h[0]!==r&&(c=this.get_consecutive_numbers_index(h,n)),c},o.get_consecutive_numbers_index=function(t,e){for(var i=t.length,s=[],r=!0,o=-1,n=0;i>n;n++){if(r||t[n]===o+1){if(s.push(n),s.length===e)break;r=!1}else s=[],r=!0;o=t[n]}return s.length>=e?t[s[0]]:!1},o.get_widgets_overlapped=function(){var e=t([]),i=[],s=this.cells_occupied_by_player.rows.slice(0);return s.reverse(),t.each(this.cells_occupied_by_player.cols,t.proxy(function(r,o){t.each(s,t.proxy(function(s,r){if(!this.gridmap[o])return!0;var n=this.gridmap[o][r];this.is_occupied(o,r)&&!this.is_player(n)&&-1===t.inArray(n,i)&&(e=e.add(n),i.push(n))},this))},this)),e},o.on_start_overlapping_column=function(t){this.set_player(t,!1)},o.on_start_overlapping_row=function(t){this.set_player(!1,t)},o.on_stop_overlapping_column=function(t){this.set_player(t,!1);var e=this;this.for_each_widget_below(t,this.cells_occupied_by_player.rows[0],function(){e.move_widget_up(this,e.player_grid_data.size_y)})},o.on_stop_overlapping_row=function(t){this.set_player(!1,t);for(var e=this,i=this.cells_occupied_by_player.cols,s=0,r=i.length;r>s;s++)this.for_each_widget_below(i[s],t,function(){e.move_widget_up(this,e.player_grid_data.size_y)})},o.move_widget_to=function(e,i){var s=this,r=e.coords().grid,o=(i-r.row,this.widgets_below(e)),n=this.can_move_to(r,r.col,i,e);return n===!1?!1:(this.remove_from_gridmap(r),r.row=i,this.add_to_gridmap(r),e.attr("data-row",i),this.$changed=this.$changed.add(e),o.each(function(e,i){var r=t(i),o=r.coords().grid,n=s.can_go_widget_up(o);n&&n!==o.row&&s.move_widget_to(r,n)}),this)},o.move_widget_up=function(e,i){var s=e.coords().grid,r=s.row,o=[];return i||(i=1),this.can_go_up(e)?(this.for_each_column_occupied(s,function(s){if(-1===t.inArray(e,o)){var n=e.coords().grid,a=r-i;if(a=this.can_go_up_to_row(n,s,a),!a)return!0;var h=this.widgets_below(e);this.remove_from_gridmap(n),n.row=a,this.add_to_gridmap(n),e.attr("data-row",n.row),this.$changed=this.$changed.add(e),o.push(e),h.each(t.proxy(function(e,s){this.move_widget_up(t(s),i)},this))}}),void 0):!1},o.move_widget_down=function(e,i){var s,r,o,n;if(0>=i)return!1;if(s=e.coords().grid,r=s.row,o=[],n=i,!e)return!1;if(-1===t.inArray(e,o)){var a=e.coords().grid,h=r+i,l=this.widgets_below(e);this.remove_from_gridmap(a),l.each(t.proxy(function(e,i){var s=t(i),r=s.coords().grid,o=this.displacement_diff(r,a,n);o>0&&this.move_widget_down(s,o)},this)),a.row=h,this.update_widget_position(a,e),e.attr("data-row",a.row),this.$changed=this.$changed.add(e),o.push(e)}},o.can_go_up_to_row=function(e,i,s){var r,o=this.gridmap,n=!0,a=[],h=e.row;if(this.for_each_column_occupied(e,function(t){o[t];for(a[t]=[],r=h;r--&&this.is_empty(t,r)&&!this.is_placeholder_in(t,r);)a[t].push(r);return a[t].length?void 0:(n=!1,!0)}),!n)return!1;for(r=s,r=1;h>r;r++){for(var l=!0,c=0,d=a.length;d>c;c++)a[c]&&-1===t.inArray(r,a[c])&&(l=!1);if(l===!0){n=r;break}}return n},o.displacement_diff=function(t,e,i){var s=t.row,r=[],o=e.row+e.size_y;this.for_each_column_occupied(t,function(t){for(var e=0,i=o;s>i;i++)this.is_empty(t,i)&&(e+=1);r.push(e)});var n=Math.max.apply(Math,r);return i-=n,i>0?i:0},o.widgets_below=function(e){var i=t.isPlainObject(e)?e:e.coords().grid,s=this,r=(this.gridmap,i.row+i.size_y-1),o=t([]);return this.for_each_column_occupied(i,function(e){s.for_each_widget_below(e,r,function(){return s.is_player(this)||-1!==t.inArray(this,o)?void 0:(o=o.add(this),!0)
})}),this.sort_by_row_asc(o)},o.set_cells_player_occupies=function(t,e){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=t,this.placeholder_grid_data.row=e,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},o.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},o.can_go_up=function(t){var e=t.coords().grid,i=e.row,s=i-1,r=(this.gridmap,!0);return 1===i?!1:(this.for_each_column_occupied(e,function(t){this.is_widget(t,s);return this.is_occupied(t,s)||this.is_player(t,s)||this.is_placeholder_in(t,s)||this.is_player_in(t,s)?(r=!1,!0):void 0}),r)},o.can_move_to=function(t,e,i,s){var r=(this.gridmap,t.el),o={size_y:t.size_y,size_x:t.size_x,col:e,row:i},n=!0,a=e+t.size_x-1;return a>this.cols?!1:s&&s<i+t.size_y-1?!1:(this.for_each_cell_occupied(o,function(e,i){var s=this.is_widget(e,i);!s||t.el&&!s.is(r)||(n=!1)}),n)},o.get_targeted_columns=function(t){for(var e=(t||this.player_grid_data.col)+(this.player_grid_data.size_x-1),i=[],s=t;e>=s;s++)i.push(s);return i},o.get_targeted_rows=function(t){for(var e=(t||this.player_grid_data.row)+(this.player_grid_data.size_y-1),i=[],s=t;e>=s;s++)i.push(s);return i},o.get_cells_occupied=function(t){var e,i={cols:[],rows:[]};for(arguments[1]instanceof jQuery&&(t=arguments[1].coords().grid),e=0;e<t.size_x;e++){var s=t.col+e;i.cols.push(s)}for(e=0;e<t.size_y;e++){var r=t.row+e;i.rows.push(r)}return i},o.for_each_cell_occupied=function(t,e){return this.for_each_column_occupied(t,function(i){this.for_each_row_occupied(t,function(t){e.call(this,i,t)})}),this},o.for_each_column_occupied=function(t,e){for(var i=0;i<t.size_x;i++){var s=t.col+i;e.call(this,s,t)}},o.for_each_row_occupied=function(t,e){for(var i=0;i<t.size_y;i++){var s=t.row+i;e.call(this,s,t)}},o._traversing_widgets=function(e,i,s,r,o){var n=this.gridmap;if(n[s]){var a,h,l=e+"/"+i;if(arguments[2]instanceof jQuery){var c=arguments[2].coords().grid;s=c.col,r=c.row,o=arguments[3]}var d=[],_=r,u={"for_each/above":function(){for(;_--&&!(_>0&&this.is_widget(s,_)&&-1===t.inArray(n[s][_],d)&&(a=o.call(n[s][_],s,_),d.push(n[s][_]),a)););},"for_each/below":function(){for(_=r+1,h=n[s].length;h>_&&(!this.is_widget(s,_)||-1!==t.inArray(n[s][_],d)||(a=o.call(n[s][_],s,_),d.push(n[s][_]),!a));_++);}};u[l]&&u[l].call(this)}},o.for_each_widget_above=function(t,e,i){return this._traversing_widgets("for_each","above",t,e,i),this},o.for_each_widget_below=function(t,e,i){return this._traversing_widgets("for_each","below",t,e,i),this},o.get_highest_occupied_cell=function(){for(var t,e=this.gridmap,i=[],s=[],r=e.length-1;r>=1;r--)for(t=e[r].length-1;t>=1;t--)if(this.is_widget(r,t)){i.push(t),s[t]=r;break}var o=Math.max.apply(Math,i);return this.highest_occupied_cell={col:s[o],row:o},this.highest_occupied_cell},o.get_widgets_from=function(e,i){var s=(this.gridmap,t());return e&&(s=s.add(this.$widgets.filter(function(){var i=t(this).attr("data-col");return i===e||i>e}))),i&&(s=s.add(this.$widgets.filter(function(){var e=t(this).attr("data-row");return e===i||e>i}))),s},o.set_dom_grid_height=function(){var t=this.get_highest_occupied_cell().row;return this.$el.css("height",t*this.min_widget_height),this},o.generate_stylesheet=function(e){var i,r="",o=this.options.max_size_x||this.cols;e||(e={}),e.cols||(e.cols=this.cols),e.rows||(e.rows=this.rows),e.namespace||(e.namespace=this.options.namespace),e.widget_base_dimensions||(e.widget_base_dimensions=this.options.widget_base_dimensions),e.widget_margins||(e.widget_margins=this.options.widget_margins),e.min_widget_width=2*e.widget_margins[0]+e.widget_base_dimensions[0],e.min_widget_height=2*e.widget_margins[1]+e.widget_base_dimensions[1];var n=t.param(e);if(t.inArray(n,s.generated_stylesheets)>=0)return!1;for(s.generated_stylesheets.push(n),i=e.cols;i>=0;i--)r+=e.namespace+' [data-col="'+(i+1)+'"] { left:'+(i*e.widget_base_dimensions[0]+i*e.widget_margins[0]+(i+1)*e.widget_margins[0])+"px; }\n";for(i=e.rows;i>=0;i--)r+=e.namespace+' [data-row="'+(i+1)+'"] { top:'+(i*e.widget_base_dimensions[1]+i*e.widget_margins[1]+(i+1)*e.widget_margins[1])+"px; }\n";for(var a=1;a<=e.rows;a++)r+=e.namespace+' [data-sizey="'+a+'"] { height:'+(a*e.widget_base_dimensions[1]+2*(a-1)*e.widget_margins[1])+"px; }\n";for(var h=1;o>=h;h++)r+=e.namespace+' [data-sizex="'+h+'"] { width:'+(h*e.widget_base_dimensions[0]+2*(h-1)*e.widget_margins[0])+"px; }\n";return this.add_style_tag(r)},o.add_style_tag=function(t){var e=i,s=e.createElement("style");return e.getElementsByTagName("head")[0].appendChild(s),s.setAttribute("type","text/css"),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(i.createTextNode(t)),this.$style_tags=this.$style_tags.add(s),this},o.remove_style_tags=function(){this.$style_tags.remove()},o.generate_faux_grid=function(t,e){this.faux_grid=[],this.gridmap=[];var i,s;for(i=e;i>0;i--)for(this.gridmap[i]=[],s=t;s>0;s--)this.add_faux_cell(s,i);return this},o.add_faux_cell=function(e,i){var s=t({left:this.baseX+(i-1)*this.min_widget_width,top:this.baseY+(e-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:i,row:e,original_col:i,original_row:e}).coords();return t.isArray(this.gridmap[i])||(this.gridmap[i]=[]),this.gridmap[i][e]=!1,this.faux_grid.push(s),this},o.add_faux_rows=function(t){for(var e=this.rows,i=e+(t||1),s=i;s>e;s--)for(var r=this.cols;r>=1;r--)this.add_faux_cell(s,r);return this.rows=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},o.add_faux_cols=function(t){for(var e=this.cols,i=e+(t||1),s=e;i>s;s++)for(var r=this.rows;r>=1;r--)this.add_faux_cell(r,s);return this.cols=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},o.recalculate_faux_grid=function(){var i=this.$wrapper.width();return this.baseX=(t(e).width()-i)/2,this.baseY=this.$wrapper.offset().top,t.each(this.faux_grid,t.proxy(function(t,e){this.faux_grid[t]=e.update({left:this.baseX+(e.data.col-1)*this.min_widget_width,top:this.baseY+(e.data.row-1)*this.min_widget_height})},this)),this},o.get_widgets_from_DOM=function(){return this.$widgets.each(t.proxy(function(e,i){this.register_widget(t(i))},this)),this},o.generate_grid_and_stylesheet=function(){var i=this.$wrapper.width(),s=(this.$wrapper.height(),this.options.max_cols),r=Math.floor(i/this.min_widget_width)+this.options.extra_cols,o=this.$widgets.map(function(){return t(this).attr("data-col")}).get();o.length||(o=[0]);var n=Math.max.apply(Math,o),a=this.options.extra_rows;return this.$widgets.each(function(e,i){a+=+t(i).attr("data-sizey")}),this.cols=Math.max(n,r,this.options.min_cols),s&&s>=n&&s<this.cols&&(this.cols=s),this.rows=Math.max(a,this.options.min_rows),this.baseX=(t(e).width()-i)/2,this.baseY=this.$wrapper.offset().top,this.container_width=this.cols*this.options.widget_base_dimensions[0]+2*(this.cols-1)*this.options.widget_margins[0],this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},o.destroy=function(){return t(e).unbind(".gridster"),this.drag_api&&this.drag_api.destroy(),this.remove_style_tags(),this.$el.remove(),this},t.fn.gridster=function(e){return this.each(function(){t(this).data("gridster")||t(this).data("gridster",new s(this,e))})},t.Gridster=o}(jQuery,window,document),jQuery.loadScript=function(t,e,i){var s=!1,r=null;$.isFunction(e)?(r=e,s=i||s):(s=e||s,r=i||r);var o=!0;jQuery('script[type="text/javascript"]').each(function(){return o=t!=$(this).attr("src")}),o?jQuery.ajax({type:"GET",url:t,success:r,dataType:"script",cache:s}):jQuery.isFunction(r)&&r.call(this)},function(t){function e(t){var e="100%",i="0px",s={top:i,bottom:e,left:i,right:e};return s[t]||t}var i="background-position",s=t.camelCase;t.each(["x","y"],function(r,o){var n=s(i+"-"+o);t.cssHooks[n]={get:function(s){var o=t.css(s,i).split(/\s+/,2);return e(o[r])},set:function(s,o){var n=t.css(s,i).split(/\s+/,2);n[r]=e(o),t.style(s,i,n.join(" "))}},t.fx.step[n]=function(e){t.style(e.elem,e.prop,e.now)}})}(jQuery),function(t,e){"use strict";var i,s=t.document;i=function(){var i,r,o,n,a,h,l,c,d,_,u,p,g,f={},y={},m=!1,w={ENTER:13,ESC:27,SPACE:32},v=[];return y={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="button green" id="alertify-ok">{{ok}}</button>',ok:'<button class="button green" id="alertify-ok">{{ok}}</button>',cancel:'<button class="button red" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},g=function(){var t,i,r=!1,o=s.createElement("fakeelement"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(t in n)if(o.style[t]!==e){i=n[t],r=!0;break}return{type:i,supported:r}},i=function(t){return s.getElementById(t)},f={labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok",transition:e,addListeners:function(t){var e,i,h,l,c,d="undefined"!=typeof o,_="undefined"!=typeof r,u="undefined"!=typeof p,g="",f=this;e=function(e){return"undefined"!=typeof e.preventDefault&&e.preventDefault(),h(e),"undefined"!=typeof p&&(g=p.value),"function"==typeof t&&("undefined"!=typeof p?t(!0,g):t(!0)),!1},i=function(e){return"undefined"!=typeof e.preventDefault&&e.preventDefault(),h(e),"function"==typeof t&&t(!1),!1},h=function(){f.hide(),f.unbind(s.body,"keyup",l),f.unbind(n,"focus",c),d&&f.unbind(o,"click",e),_&&f.unbind(r,"click",i)},l=function(t){var s=t.keyCode;(s===w.SPACE&&!u||u&&s===w.ENTER)&&e(t),s===w.ESC&&_&&i(t)},c=function(){u?p.focus():!_||f.buttonReverse?o.focus():r.focus()},this.bind(n,"focus",c),this.bind(a,"focus",c),d&&this.bind(o,"click",e),_&&this.bind(r,"click",i),this.bind(s.body,"keyup",l),this.transition.supported||this.setFocus()},bind:function(t,e,i){"function"==typeof t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},handleErrors:function(){if("undefined"!=typeof t.onerror){var e=this;return t.onerror=function(t,i,s){e.error("["+t+" on line "+s+" of "+i+"]",0)},!0}return!1},appendButtons:function(t,e){return this.buttonReverse?e+t:t+e},build:function(t){var e="",i=t.type,s=t.message,r=t.cssClass||"";switch(e+='<div class="alertify-dialog">',e+='<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>',"none"===f.buttonFocus&&(e+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===i&&(e+='<div id="alertify-form">'),e+='<article class="alertify-inner">',e+=y.message.replace("{{message}}",s),"prompt"===i&&(e+=y.input),e+=y.buttons.holder,e+="</article>","prompt"===i&&(e+="</div>"),e+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',e+="</div>",i){case"confirm":e=e.replace("{{buttons}}",this.appendButtons(y.buttons.cancel,y.buttons.ok)),e=e.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":e=e.replace("{{buttons}}",this.appendButtons(y.buttons.cancel,y.buttons.submit)),e=e.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":e=e.replace("{{buttons}}",y.buttons.ok),e=e.replace("{{ok}}",this.labels.ok)}return d.className="alertify alertify-"+i+" "+r,c.className="alertify-cover",e},close:function(t,e){var i,s,r=e&&!isNaN(e)?+e:this.delay,o=this;this.bind(t,"click",function(){i(t)}),s=function(t){t.stopPropagation(),o.unbind(this,o.transition.type,s),_.removeChild(this),_.hasChildNodes()||(_.className+=" alertify-logs-hidden")},i=function(t){"undefined"!=typeof t&&t.parentNode===_&&(o.transition.supported?(o.bind(t,o.transition.type,s),t.className+=" alertify-log-hide"):(_.removeChild(t),_.hasChildNodes()||(_.className+=" alertify-logs-hidden")))},0!==e&&setTimeout(function(){i(t)},r)},dialog:function(t,e,i,r,o){l=s.activeElement;var n=function(){_&&null!==_.scrollTop&&c&&null!==c.scrollTop||n()};if("string"!=typeof t)throw new Error("message must be a string");if("string"!=typeof e)throw new Error("type must be a string");if("undefined"!=typeof i&&"function"!=typeof i)throw new Error("fn must be a function");return this.init(),n(),v.push({type:e,message:t,callback:i,placeholder:r,cssClass:o}),m||this.setup(),this},extend:function(t){if("string"!=typeof t)throw new Error("extend method must have exactly one paramter");return function(e,i){return this.log(e,t,i),this}},hide:function(){var t,e=this;v.splice(0,1),v.length>0?this.setup(!0):(m=!1,t=function(i){i.stopPropagation(),e.unbind(d,e.transition.type,t)},this.transition.supported?(this.bind(d,this.transition.type,t),d.className="alertify alertify-hide alertify-hidden"):d.className="alertify alertify-hide alertify-hidden alertify-isHidden",c.className="alertify-cover alertify-cover-hidden",l.focus())},init:function(){s.createElement("nav"),s.createElement("article"),s.createElement("section"),null==i("alertify-cover")&&(c=s.createElement("div"),c.setAttribute("id","alertify-cover"),c.className="alertify-cover alertify-cover-hidden",s.body.appendChild(c)),null==i("alertify")&&(m=!1,v=[],d=s.createElement("section"),d.setAttribute("id","alertify"),d.className="alertify alertify-hidden",s.body.appendChild(d)),null==i("alertify-logs")&&(_=s.createElement("section"),_.setAttribute("id","alertify-logs"),_.className="alertify-logs alertify-logs-hidden",s.body.appendChild(_)),s.body.setAttribute("tabindex","0"),this.transition=g()},log:function(t,e,i){var s=function(){_&&null!==_.scrollTop||s()};return this.init(),s(),_.className="alertify-logs",this.notify(t,e,i),this},notify:function(t,e,i){var r=s.createElement("article");r.className="alertify-log"+("string"==typeof e&&""!==e?" alertify-log-"+e:""),r.innerHTML=t,_.appendChild(r),setTimeout(function(){r.className=r.className+" alertify-log-show"},50),this.close(r,i)},set:function(t){var e;if("object"!=typeof t&&t instanceof Array)throw new Error("args must be an object");for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},setFocus:function(){p?(p.focus(),p.select()):h.focus()},setup:function(t){var s,l=v[0],c=this;m=!0,s=function(t){t.stopPropagation(),c.setFocus(),c.unbind(d,c.transition.type,s)},this.transition.supported&&!t&&this.bind(d,this.transition.type,s),d.innerHTML=this.build(l),n=i("alertify-resetFocus"),a=i("alertify-resetFocusBack"),o=i("alertify-ok")||e,r=i("alertify-cancel")||e,h="cancel"===f.buttonFocus?r:"none"===f.buttonFocus?i("alertify-noneFocus"):o,p=i("alertify-text")||e,u=i("alertify-form")||e,"string"==typeof l.placeholder&&""!==l.placeholder&&(p.value=l.placeholder),t&&this.setFocus(),this.addListeners(l.callback)},unbind:function(t,e,i){"function"==typeof t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)}},{alert:function(t,e,i){return f.dialog(t,"alert",e,"",i),this},confirm:function(t,e,i){return f.dialog(t,"confirm",e,"",i),this},extend:f.extend,init:f.init,log:function(t,e,i){return f.log(t,e,i),this},prompt:function(t,e,i,s){return f.dialog(t,"prompt",e,i,s),this},success:function(t,e){return f.log(t,"success",e),this},error:function(t,e){return f.log(t,"error",e),this},set:function(t){f.set(t)},labels:f.labels,debug:f.handleErrors}},"function"==typeof define?define([],function(){return new i}):"undefined"==typeof t.alertify&&(t.alertify=new i)}(this),function(){function t(t,e,i,s){if(t.addEventListener)return t.addEventListener(e,i,s),{destroy:function(){t.removeEventListener(e,i,s)}};var r=function(){i.handleEvent(window.event,i)};return t.attachEvent("on"+e,r),{destroy:function(){t.detachEvent("on"+e,r)}}}var e="ontouchstart"in window;this.FastButton=function(i,s,r){this.events=[],this.touchEvents=[],this.element=i,this.handler=s,this.useCapture=r,e&&this.events.push(t(i,"touchstart",this,this.useCapture)),this.events.push(t(i,"click",this,this.useCapture))},this.FastButton.prototype.destroy=function(){for(i=this.events.length-1;i>=0;i-=1)this.events[i].destroy();this.events=this.touchEvents=this.element=this.handler=this.fastButton=null},this.FastButton.prototype.handleEvent=function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onClick(t);break;case"click":this.onClick(t)}},this.FastButton.prototype.onTouchStart=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.touchEvents.push(t(this.element,"touchend",this,this.useCapture)),this.touchEvents.push(t(document.body,"touchmove",this,this.useCapture)),this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY},this.FastButton.prototype.onTouchMove=function(t){(Math.abs(t.touches[0].clientX-this.startX)>10||Math.abs(t.touches[0].clientY-this.startY)>10)&&this.reset()},this.FastButton.prototype.onClick=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.reset();var e=this.handler.call(this.element,t);return"touchend"==t.type&&clickbuster.preventGhostClick(this.startX,this.startY),e},this.FastButton.prototype.reset=function(){for(i=this.touchEvents.length-1;i>=0;i-=1)this.touchEvents[i].destroy();this.touchEvents=[]},this.clickbuster=function(){},this.clickbuster.preventGhostClick=function(t,e){clickbuster.coordinates.push(t,e),window.setTimeout(clickbuster.pop,2500)},this.clickbuster.pop=function(){clickbuster.coordinates.splice(0,2)},this.clickbuster.onClick=function(t){for(var e=0;e<clickbuster.coordinates.length;e+=2){var i=clickbuster.coordinates[e],s=clickbuster.coordinates[e+1];Math.abs(t.clientX-i)<25&&Math.abs(t.clientY-s)<25&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1)}},e&&(document.addEventListener("click",clickbuster.onClick,!0),clickbuster.coordinates=[])}(this),function(t){t.fn.tclick=function(t){return this.bind("touchstart",function(e){t.call(this,e),e.stopPropagation(),e.preventDefault()}),this.bind("click",function(e){t.call(this,e)}),this}}(jQuery),function(t){t.event.special.fastClick={setup:function(){t(this).data("fastClick",new FastButton(this,t.event.special.fastClick.handler))},teardown:function(){t(this).data("fastClick").destroy(),t(this).removeData("fastClick")},handler:function(e){e=t.event.fix(e),e.type="fastClick",t.event.dispatch.apply(this,arguments)}},t.fn.fastClick=function(e){return t(this).each(function(){return e?t(this).bind("fastClick",e):t(this).trigger("fastClick")})}}(jQuery),function(t){t.extend({gracefulWebSocket:function(e,i){function s(){function e(){return c.previousRequest=c.currentRequest,c.currentRequest=(new Date).getTime(),t.extend({previousRequest:c.previousRequest,currentRequest:c.currentRequest},r.fallbackPollParams)}function i(t){var e={data:t};c.onmessage(e)}function s(){t.ajax({type:r.fallbackPollMethod,url:r.fallbackPollURL,dataType:"text",data:e(),success:i,error:function(){t(c).triggerHandler("error")}})}const o=0,n=1,a=3;var h,l,c={readyState:o,bufferedAmount:0,send:function(s){var o=!0;return t.ajax({async:!1,type:r.fallbackSendMethod,url:r.fallbackSendURL+"?"+t.param(e()),data:s,dataType:"text",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:i,error:function(){o=!1,t(c).triggerHandler("error")}}),o},close:function(){clearTimeout(l),clearInterval(h),this.readyState=a,t(c).triggerHandler("close")},onopen:function(){},onmessage:function(){},onerror:function(){},onclose:function(){},previousRequest:null,currentRequest:null};return l=setTimeout(function(){c.readyState=n,t(c).triggerHandler("open"),s(),h=setInterval(s,r.fallbackPollInterval)},r.fallbackOpenDelay),c}this.defaults={keepAlive:!1,autoReconnect:!1,fallback:!0,fallbackSendURL:e.replace("ws:","http:").replace("wss:","https:"),fallbackSendMethod:"POST",fallbackPollURL:e.replace("ws:","http:").replace("wss:","https:"),fallbackPollMethod:"GET",fallbackOpenDelay:100,fallbackPollInterval:3e3,fallbackPollParams:{}};var r=t.extend({},this.defaults,i),o=window.WebSocket?new WebSocket(e):new s;return t(window).unload(function(){o.close(),o=null}),o}})}(jQuery),function(t,e){function i(t,e,i){return t.addEventListener?(t.addEventListener(e,i,!1),void 0):(t.attachEvent("on"+e,i),void 0)}function s(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return $[t.which]?$[t.which]:k[t.which]?k[t.which]:String.fromCharCode(t.which).toLowerCase()}function r(t,e){return t.sort().join(",")===e.sort().join(",")}function o(t){t=t||{};var e,i=!1;for(e in A)t[e]?i=!0:A[e]=0;i||(j=!1)}function n(t,e,i,s,o,n){var a,h,l=[],c=i.type;if(!T[t])return[];for("keyup"==c&&u(t)&&(e=[t]),a=0;a<T[t].length;++a)if(h=T[t][a],(s||!h.seq||A[h.seq]==h.level)&&c==h.action&&("keypress"==c&&!i.metaKey&&!i.ctrlKey||r(e,h.modifiers))){var d=!s&&h.combo==o,_=s&&h.seq==s&&h.level==n;(d||_)&&T[t].splice(a,1),l.push(h)}return l}function a(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function h(t){return t.preventDefault?(t.preventDefault(),void 0):(t.returnValue=!1,void 0)}function l(t){return t.stopPropagation?(t.stopPropagation(),void 0):(t.cancelBubble=!0,void 0)}function c(t,e,i,s){S.stopCallback(e,e.target||e.srcElement,i,s)||t(e,i)===!1&&(h(e),l(e))}function d(t,e,i){var s,r=n(t,e,i),a={},h=0,l=!1;for(s=0;s<r.length;++s)r[s].seq&&(h=Math.max(h,r[s].level));for(s=0;s<r.length;++s)if(r[s].seq){if(r[s].level!=h)continue;l=!0,a[r[s].seq]=1,c(r[s].callback,i,r[s].combo,r[s].seq)}else l||c(r[s].callback,i,r[s].combo);var d="keypress"==i.type&&P;i.type!=j||u(t)||d||o(a),P=l&&"keydown"==i.type}function _(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=s(t);if(e)return"keyup"==t.type&&N===e?(N=!1,void 0):(S.handleKey(e,a(t),t),void 0)}function u(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function p(){clearTimeout(x),x=setTimeout(o,1e3)}function g(){if(!z){z={};for(var t in $)t>95&&112>t||$.hasOwnProperty(t)&&(z[$[t]]=t)}return z}function f(t,e,i){return i||(i=g()[t]?"keydown":"keypress"),"keypress"==i&&e.length&&(i="keydown"),i}function y(t,e,i,r){function n(e){return function(){j=e,++A[t],p()}}function a(e){c(i,e,t),"keyup"!==r&&(N=s(e)),setTimeout(o,10)}A[t]=0;for(var h=0;h<e.length;++h){var l=h+1===e.length,d=l?a:n(r||w(e[h+1]).action);v(e[h],d,r,t,h)}}function m(t){return"+"===t?["+"]:t.split("+")}function w(t,e){var i,s,r,o=[];for(i=m(t),r=0;r<i.length;++r)s=i[r],E[s]&&(s=E[s]),e&&"keypress"!=e&&C[s]&&(s=C[s],o.push("shift")),u(s)&&o.push(s);return e=f(s,o,e),{key:s,modifiers:o,action:e}}function v(t,e,i,s,r){M[t+":"+i]=e,t=t.replace(/\s+/g," ");var o,a=t.split(" ");return a.length>1?(y(t,a,e,i),void 0):(o=w(t,i),T[o.key]=T[o.key]||[],n(o.key,o.modifiers,{type:o.action},s,t,r),T[o.key][s?"unshift":"push"]({callback:e,modifiers:o.modifiers,action:o.action,seq:s,level:r,combo:t}),void 0)}function b(t,e,i){for(var s=0;s<t.length;++s)v(t[s],e,i)}for(var z,x,$={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},k={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},C={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},E={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},T={},M={},A={},N=!1,P=!1,j=!1,F=1;20>F;++F)$[111+F]="f"+F;for(F=0;9>=F;++F)$[F+96]=F;i(e,"keypress",_),i(e,"keydown",_),i(e,"keyup",_);var S={bind:function(t,e,i){return t=t instanceof Array?t:[t],b(t,e,i),this},unbind:function(t,e){return S.bind(t,function(){},e)},trigger:function(t,e){return M[t+":"+e]&&M[t+":"+e]({},t),this},reset:function(){return T={},M={},this},stopCallback:function(t,e){return(" "+e.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},handleKey:d};t.Mousetrap=S,"function"==typeof define&&define.amd&&define(S)}(window,document),function(){var t=new $.Event("remove"),e=$.fn.remove;$.fn.remove=function(){return $(this).trigger(t),e.apply(this,arguments)}}(),function(t){t.fn.drags=function(e){if(e=t.extend(t.fn.drags.defaults,e),""===e.handle)var i=this;else var i=this.find(e.handle);var s=!1;return i.css("cursor",e.cursor).on("mousedown",function(r){if(s=!0,e.condition()){if(""===e.handle)var o=t(this).addClass("drags");else var o=t(this).addClass("active-handle").parent().addClass("drags");e.start(t("drags"));var n=o.css("z-index"),a=o.outerHeight(),h=o.outerWidth(),l=r.pageX,c=r.pageY,d=o.offset().top+a-c;pos_x=o.offset().left+h-l,o.css("z-index",1e3).parent().on("mousemove",function(r){if(c="y"==e.axis?r.pageY:c,l="X"==e.axis?r.pageY:l,null!=e.boundary&&""!=e.boundary){var o=e.boundary.offset().top,_=e.boundary.offset().top+e.boundary.outerHeight();o>c?(c=o,i.trigger("mouseup")):c>_&&(c=_,i.trigger("mouseup"))}s&&e.move(t(".drags")),t(".drags").offset({top:c+d-a,left:l+pos_x-h}).on("mouseup",function(){t(this).removeClass("drags").css("z-index",n)})}),r.preventDefault()}}).on("mouseup",function(){s=!1,""===e.handle?t(this).removeClass("drags"):t(this).removeClass("active-handle").parent().removeClass("drags"),e.stop()})},t.fn.drags.defaults={handle:"",cursor:"move",axis:null,condition:function(){return!0},move:function(){return!0},start:function(){return!0},stop:function(){return!0},boundary:null}}(jQuery);