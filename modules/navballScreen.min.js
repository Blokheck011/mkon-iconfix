function init(e,n,t){function a(e){var n=e*(Math.PI/180);return n}function r(){C=new THREE.Scene;var e=45,n=1,t=.1,r=2e4;g=new THREE.PerspectiveCamera(e,n,t,r),C.add(g),g.position.set(0,0,-150),g.lookAt(C.position),g.rotation.z=0,N=this.isWebGL()?new THREE.WebGLRenderer({antialias:!0}):new THREE.CanvasRenderer,N.setSize(290,290),V=document.getElementById("sphere"),V.appendChild(N.domElement),w=new THREE.Object3D;var E=49.99,l=new THREE.SphereGeometry(E,49.99,49.99),d=THREE.ImageUtils.loadTexture("img/navballTexture_10_low.jpg");d.needsUpdate=!0;var T=new THREE.Vector3(0,E,0),v=new THREE.Vector3(.01,-E,0),R=new THREE.Vector3(-.01,-E,0),H=new THREE.Vector3(0,-E,.01),m=new THREE.Vector3(0,-E,-.01),h=Math.sin(45)*E,p=(new THREE.Vector3(E,0,1),new THREE.Vector3(-h,0,0),new THREE.Vector3(-h,0,0),new THREE.Vector3(-.01,-E,-.01)),M=new THREE.Vector3(.01,-E,-.01),f=new THREE.Vector3(-.01,-E,.01),b=new THREE.Vector3(.01,-E,.01);s(c(T,v),new THREE.Color(16777215),1),s(c(T,R),new THREE.Color(16777215),1),s(c(T,H),new THREE.Color(16777215),1),s(c(T,m),new THREE.Color(16737792),1),s(c(T,p),new THREE.Color(16777215),.4),s(c(T,M),new THREE.Color(16777215),.4),s(c(T,f),new THREE.Color(16777215),.4),s(c(T,b),new THREE.Color(16777215),.4);var y=Math.cos(a(45))*E;o(y,1.01*-y,16777215,.4),o(y,1.01*y,16777215,.4);new THREE.Vector3(0,-50,0);i("270",4,-48,0,5,0,a(-90),a(180),1,16777215,1),i("225",4,-37,0,-31,0,a(225),a(180),1,16777215,1),i("90",4,48,0,-3,0,a(90),a(-180),1,16777215,1),i("N",4,1.5,-4,-48,0,a(180),0,1,16777215,1),i("135",4,38,0,30,0,a(45),a(180),1,16777215,1),i("180",4,5,-1,48,0,0,a(180),1,16777215,1);var O=new THREE.MeshBasicMaterial({map:d});u=new THREE.Mesh(l,O),C.add(u),C.add(w)}function o(e,n,t,r){for(var o=32,e=e,i=new THREE.Geometry,E=new THREE.LineBasicMaterial({color:t,opacity:r,transparent:!0}),c=0;o>=c;c++){var s=c/o*Math.PI*2;i.vertices.push(new THREE.Vector3(Math.cos(s)*e,Math.sin(s)*e,0))}var l=new THREE.Line(i,E);l.position.set(0,n,0),l.rotation.set(a(90),0,0),w.add(l)}function i(e,n,t,a,r,o,i,E){var c=new THREE.TextGeometry(e,{size:n,color:16777215,height:n/2,curveSegments:0,font:"helvetiker"});c.computeBoundingBox(),c.computeVertexNormals();var s=new THREE.MeshBasicMaterial({color:16777215}),l=new THREE.Mesh(c,s);l.position.set(t,a,r),l.rotation.set(o,i,E),w.add(l)}function E(e,n){var t=e.angleTo(n);return function(a){var r=(new THREE.Vector3).addVectors(e.clone().multiplyScalar(Math.sin((1-a)*t)),n.clone().multiplyScalar(Math.sin(a*t))).divideScalar(Math.sin(t));return r}}function c(e,n){var t=new THREE.Curve;return t.getPoint=E(e,n),t}function s(e,n,t){var a=new THREE.Geometry;a.vertices=e.getPoints(100),a.computeLineDistances();var r=new THREE.LineBasicMaterial({color:n,opacity:t,transparent:!0}),o=new THREE.Line(a,r);o.rotation.set(0,0,0),H.push(o),w.add(o)}function l(){setTimeout(function(){requestAnimationFrame(l)},1e3/30),T(),d()}function d(){euler=new THREE.Euler(a(360-m),a(h),a(p),"ZXY");var e=(new THREE.Quaternion).setFromEuler(euler),n=new THREE.Quaternion;THREE.Quaternion.slerp(u.quaternion,e,n,.4),u.quaternion=w.quaternion=n,u.quaternion.normalize(),w.quaternion.normalize()}function T(){N.render(C,g)}var u,w,v=MKON.FNC.randomString(5),R=["n.rawheading","n.rawpitch","n.rawroll"],H=[];this.isWebGL=function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}},function(e){return e*=180/Math.PI,-e};var m,h,p,M=new MKON.module("Navball","Screen",v,R,function(){$("#"+this.id);h=MKON.CONTENT.getVariable(R[0]),m=MKON.CONTENT.getVariable(R[1]),p=MKON.CONTENT.getVariable(R[2])}),f='<li id="'+v+'" data-row="1" data-col="1" data-link="'+t+'" data-sizex="1" data-sizey="1">					<div class="options"><div class="remove"><i class="fa fa-times"></i></div></div>					<div class="content blank"><div class="navball screen"><div class="navballPointer"></div><div class="navballOutside"></div><div id="sphere" class="sphere"></div></div></div></li>';f={html:f,x:3,y:3,col:e,row:n},MKON.CONTENT.addModule(M,f);var V,C,g,N;r(),l()}